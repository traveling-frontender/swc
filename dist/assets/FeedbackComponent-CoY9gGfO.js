import{h as E,z as h,L as oe,E as x,M as J,N as be,O as we,P as Ce,Q as Oe,R as G,S,G as Pe,T as v,U as Ve,V as Q,D as X,J as Y,d as xe,W as Ae,X as _e,u as De,_ as Se,r as K,o as Te,c as je,a as T,t as q,b as A,Y as Ie,n as Le}from"./index-DDyZIDCy.js";import{A as Fe}from"./AppCard-Cb1KVcua.js";var V=(e=>(e.PENDING="PENDING",e.SUCCESS="SUCCESS",e.FAILED="FAILED",e.NOT_STARTED="NOT_STARTED",e))(V||{});const le=function(e){return e===Object(e)&&!Array.isArray(e)&&typeof e!="function"},Ne=e=>e.startsWith("_")?e.replace("_",""):e.includes("-")||e.includes("_")?e.toLowerCase().replace(/([-_][a-z])/g,n=>n.toUpperCase().replace("-","").replace("_","")):e,I=e=>Array.isArray(e)?e.map(n=>I(n)):le(e)?Object.keys(e).reduce((n,r)=>({...n,[Ne(r)]:I(e[r])}),{}):e,D=e=>{if(e===void 0)return;let n={};if(Array.isArray(e))return e.map(r=>D(r));if(le(e))for(const r in e)n[r.replace(/([A-Z])/g,"_$1").toLowerCase()]=D(e[r]);else return e;return n={...n,...!!n.per_page&&{"per-page":n.per_page}},delete n.per_page,n},ze=(e,n=!1,r)=>{let t=null;const s=E(null),l=E(null),f=E(V.NOT_STARTED),i=h(()=>(console.log(f.value),f.value===V.PENDING)),o=async u=>{var $;s.value=null,l.value=null,f.value=V.PENDING;try{t==null||t.abort(),t=new AbortController;const m=J(u||r),g=await e(t,D(m));s.value=I(g),f.value=V.SUCCESS,t=null}catch(m){f.value=V.FAILED;const g=m,p=($=g.response)==null?void 0:$.status,a=g.response;if(a&&(l.value={status:p,data:I(a.data)}),n)throw new Error("Error for external call catch")}};return n||(oe(r)?x(()=>r,async()=>await o(D(J(r))),{immediate:!0,deep:!0}):o(D(r))),{data:s,error:l,isLoading:i,executeApiCall:o}},ke=be("feedback",{state:()=>({api:"https://jsonplaceholder.typicode.com/todos/1",loading:null}),actions:{async sendForm(){return ze(async n=>await we.get(this.api,{signal:n.signal}).then(r=>r.data).catch(r=>r.data))}}});function ee(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,t)}return r}function w(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ee(Object(r),!0).forEach(function(t){Be(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Be(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function te(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((r,t)=>(n.includes(t)||(r[t]=v(e[t])),r),{})}function L(e){return typeof e=="function"}function Ge(e){return oe(e)||Ve(e)}function ie(e,n,r){let t=e;const s=n.split(".");for(let l=0;l<s.length;l++){if(!t[s[l]])return r;t=t[s[l]]}return t}function B(e,n,r){return h(()=>e.some(t=>ie(n,t,{[r]:!1})[r]))}function re(e,n,r){return h(()=>e.reduce((t,s)=>{const l=ie(n,s,{[r]:!1})[r]||[];return t.concat(l)},[]))}function ue(e,n,r,t){return e.call(t,v(n),v(r),t)}function ce(e){return e.$valid!==void 0?!e.$valid:!e}function Ue(e,n,r,t,s,l,f){let{$lazy:i,$rewardEarly:o}=s,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],$=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0,g=arguments.length>10?arguments[10]:void 0;const p=E(!!t.value),a=E(0);r.value=!1;const d=x([n,t].concat(u,g),()=>{if(i&&!t.value||o&&!m.value&&!r.value)return;let c;try{c=ue(e,n,$,f)}catch(y){c=Promise.reject(y)}a.value++,r.value=!!a.value,p.value=!1,Promise.resolve(c).then(y=>{a.value--,r.value=!!a.value,l.value=y,p.value=ce(y)}).catch(y=>{a.value--,r.value=!!a.value,l.value=y,p.value=!0})},{immediate:!0,deep:typeof n=="object"});return{$invalid:p,$unwatch:d}}function Me(e,n,r,t,s,l,f,i){let{$lazy:o,$rewardEarly:u}=t;const $=()=>({}),m=h(()=>{if(o&&!r.value||u&&!i.value)return!1;let g=!0;try{const p=ue(e,n,f,l);s.value=p,g=ce(p)}catch(p){s.value=p}return g});return{$unwatch:$,$invalid:m}}function We(e,n,r,t,s,l,f,i,o,u,$){const m=E(!1),g=e.$params||{},p=E(null);let a,d;e.$async?{$invalid:a,$unwatch:d}=Ue(e.$validator,n,m,r,t,p,s,e.$watchTargets,o,u,$):{$invalid:a,$unwatch:d}=Me(e.$validator,n,r,t,p,s,o,u);const c=e.$message;return{$message:L(c)?h(()=>c(te({$pending:m,$invalid:a,$params:te(g),$model:n,$response:p,$validator:l,$propertyPath:i,$property:f}))):c||"",$params:g,$pending:m,$invalid:a,$response:p,$unwatch:d}}function Ze(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=v(e),r=Object.keys(n),t={},s={},l={};let f=null;return r.forEach(i=>{const o=n[i];switch(!0){case L(o.$validator):t[i]=o;break;case L(o):t[i]={$validator:o};break;case i==="$validationGroups":f=o;break;case i.startsWith("$"):l[i]=o;break;default:s[i]=o}}),{rules:t,nestedValidators:s,config:l,validationGroups:f}}const He="__root";function Je(e,n,r,t,s,l,f,i,o){const u=Object.keys(e),$=t.get(s,e),m=E(!1),g=E(!1),p=E(0);if($){if(!$.$partial)return $;$.$unwatch(),m.value=$.$dirty.value}const a={$dirty:m,$path:s,$touch:()=>{m.value||(m.value=!0)},$reset:()=>{m.value&&(m.value=!1)},$commit:()=>{}};return u.length?(u.forEach(d=>{a[d]=We(e[d],n,a.$dirty,l,f,d,r,s,o,g,p)}),a.$externalResults=h(()=>i.value?[].concat(i.value).map((d,c)=>({$propertyPath:s,$property:r,$validator:"$externalResults",$uid:"".concat(s,"-externalResult-").concat(c),$message:d,$params:{},$response:null,$pending:!1})):[]),a.$invalid=h(()=>{const d=u.some(c=>v(a[c].$invalid));return g.value=d,!!a.$externalResults.value.length||d}),a.$pending=h(()=>u.some(d=>v(a[d].$pending))),a.$error=h(()=>a.$dirty.value?a.$pending.value||a.$invalid.value:!1),a.$silentErrors=h(()=>u.filter(d=>v(a[d].$invalid)).map(d=>{const c=a[d];return S({$propertyPath:s,$property:r,$validator:d,$uid:"".concat(s,"-").concat(d),$message:c.$message,$params:c.$params,$response:c.$response,$pending:c.$pending})}).concat(a.$externalResults.value)),a.$errors=h(()=>a.$dirty.value?a.$silentErrors.value:[]),a.$unwatch=()=>u.forEach(d=>{a[d].$unwatch()}),a.$commit=()=>{g.value=!0,p.value=Date.now()},t.set(s,e,a),a):($&&t.set(s,e,a),a)}function Qe(e,n,r,t,s,l,f){const i=Object.keys(e);return i.length?i.reduce((o,u)=>(o[u]=U({validations:e[u],state:n,key:u,parentKey:r,resultsCache:t,globalConfig:s,instance:l,externalResults:f}),o),{}):{}}function Xe(e,n,r){const t=h(()=>[n,r].filter(a=>a).reduce((a,d)=>a.concat(Object.values(v(d))),[])),s=h({get(){return e.$dirty.value||(t.value.length?t.value.every(a=>a.$dirty):!1)},set(a){e.$dirty.value=a}}),l=h(()=>{const a=v(e.$silentErrors)||[],d=t.value.filter(c=>(v(c).$silentErrors||[]).length).reduce((c,y)=>c.concat(...y.$silentErrors),[]);return a.concat(d)}),f=h(()=>{const a=v(e.$errors)||[],d=t.value.filter(c=>(v(c).$errors||[]).length).reduce((c,y)=>c.concat(...y.$errors),[]);return a.concat(d)}),i=h(()=>t.value.some(a=>a.$invalid)||v(e.$invalid)||!1),o=h(()=>t.value.some(a=>v(a.$pending))||v(e.$pending)||!1),u=h(()=>t.value.some(a=>a.$dirty)||t.value.some(a=>a.$anyDirty)||s.value),$=h(()=>s.value?o.value||i.value:!1),m=()=>{e.$touch(),t.value.forEach(a=>{a.$touch()})},g=()=>{e.$commit(),t.value.forEach(a=>{a.$commit()})},p=()=>{e.$reset(),t.value.forEach(a=>{a.$reset()})};return t.value.length&&t.value.every(a=>a.$dirty)&&m(),{$dirty:s,$errors:f,$invalid:i,$anyDirty:u,$error:$,$pending:o,$touch:m,$reset:p,$silentErrors:l,$commit:g}}function U(e){let{validations:n,state:r,key:t,parentKey:s,childResults:l,resultsCache:f,globalConfig:i={},instance:o,externalResults:u}=e;const $=s?"".concat(s,".").concat(t):t,{rules:m,nestedValidators:g,config:p,validationGroups:a}=Ze(n),d=w(w({},i),p),c=t?h(()=>{const R=v(r);return R?v(R[t]):void 0}):r,y=w({},v(u)||{}),M=h(()=>{const R=v(u);return t?R?v(R[t]):void 0:R}),W=Je(m,c,t,f,$,d,o,M,r),C=Qe(g,c,$,f,d,o,M),Z={};a&&Object.entries(a).forEach(R=>{let[O,b]=R;Z[O]={$invalid:B(b,C,"$invalid"),$error:B(b,C,"$error"),$pending:B(b,C,"$pending"),$errors:re(b,C,"$errors"),$silentErrors:re(b,C,"$silentErrors")}});const{$dirty:F,$errors:me,$invalid:N,$anyDirty:$e,$error:pe,$pending:z,$touch:k,$reset:ve,$silentErrors:ge,$commit:H}=Xe(W,C,l),he=t?h({get:()=>v(c),set:R=>{F.value=!0;const O=v(r),b=v(u);b&&(b[t]=y[t]),G(O[t])?O[t].value=R:O[t]=R}}):null;t&&d.$autoDirty&&x(c,()=>{F.value||k();const R=v(u);R&&(R[t]=y[t])},{flush:"sync"});async function ye(){return k(),d.$rewardEarly&&(H(),await Y()),await Y(),new Promise(R=>{if(!z.value)return R(!N.value);const O=x(z,()=>{R(!N.value),O()})})}function Re(R){return(l.value||{})[R]}function Ee(){G(u)?u.value=y:Object.keys(y).length===0?Object.keys(u).forEach(R=>{delete u[R]}):Object.assign(u,y)}return S(w(w(w({},W),{},{$model:he,$dirty:F,$error:pe,$errors:me,$invalid:N,$anyDirty:$e,$pending:z,$touch:k,$reset:ve,$path:$||He,$silentErrors:ge,$validate:ye,$commit:H},l&&{$getResultsForChild:Re,$clearExternalResults:Ee,$validationGroups:Z}),C))}class Ye{constructor(){this.storage=new Map}set(n,r,t){this.storage.set(n,{rules:r,result:t})}checkRulesValidity(n,r,t){const s=Object.keys(t),l=Object.keys(r);return l.length!==s.length||!l.every(i=>s.includes(i))?!1:l.every(i=>r[i].$params?Object.keys(r[i].$params).every(o=>v(t[i].$params[o])===v(r[i].$params[o])):!0)}get(n,r){const t=this.storage.get(n);if(!t)return;const{rules:s,result:l}=t,f=this.checkRulesValidity(n,r,s),i=l.$unwatch?l.$unwatch:()=>({});return f?l:{$dirty:l.$dirty,$partial:!0,$unwatch:i}}}const j={COLLECT_ALL:!0,COLLECT_NONE:!1},ne=Symbol("vuelidate#injectChildResults"),ae=Symbol("vuelidate#removeChildResults");function Ke(e){let{$scope:n,instance:r}=e;const t={},s=E([]),l=h(()=>s.value.reduce(($,m)=>($[m]=v(t[m]),$),{}));function f($,m){let{$registerAs:g,$scope:p,$stopPropagation:a}=m;a||n===j.COLLECT_NONE||p===j.COLLECT_NONE||n!==j.COLLECT_ALL&&n!==p||(t[g]=$,s.value.push(g))}r.__vuelidateInjectInstances=[].concat(r.__vuelidateInjectInstances||[],f);function i($){s.value=s.value.filter(m=>m!==$),delete t[$]}r.__vuelidateRemoveInstances=[].concat(r.__vuelidateRemoveInstances||[],i);const o=Q(ne,[]);X(ne,r.__vuelidateInjectInstances);const u=Q(ae,[]);return X(ae,r.__vuelidateRemoveInstances),{childResults:l,sendValidationResultsToParent:o,removeValidationResultsFromParent:u}}function de(e){return new Proxy(e,{get(n,r){return typeof n[r]=="object"?de(n[r]):h(()=>n[r])}})}let se=0;function qe(e,n){var r;let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(t=e,e=void 0,n=void 0);let{$registerAs:s,$scope:l=j.COLLECT_ALL,$stopPropagation:f,$externalResults:i,currentVueInstance:o}=t;const u=o||((r=Ce())===null||r===void 0?void 0:r.proxy),$=u?u.$options:{};s||(se+=1,s="_vuelidate_".concat(se));const m=E({}),g=new Ye,{childResults:p,sendValidationResultsToParent:a,removeValidationResultsFromParent:d}=u?Ke({$scope:l,instance:u}):{childResults:E({})};if(!e&&$.validations){const c=$.validations;n=E({}),Oe(()=>{n.value=u,x(()=>L(c)?c.call(n.value,new de(n.value)):c,y=>{m.value=U({validations:y,state:n,childResults:p,resultsCache:g,globalConfig:t,instance:u,externalResults:i||u.vuelidateExternalResults})},{immediate:!0})}),t=$.validationsConfig||t}else{const c=G(e)||Ge(e)?e:S(e||{});x(c,y=>{m.value=U({validations:y,state:n,childResults:p,resultsCache:g,globalConfig:t,instance:u!=null?u:{},externalResults:i})},{immediate:!0})}return u&&(a.forEach(c=>c(m,{$registerAs:s,$scope:l,$stopPropagation:f})),Pe(()=>d.forEach(c=>c(s)))),h(()=>w(w({},v(m.value)),p.value))}const fe=e=>{if(e=v(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let n in e)return!0;return!1}return!!String(e).length};function P(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=>(t=v(t),!fe(t)||n.every(s=>(s.lastIndex=0,s.test(t))))}P(/^[a-zA-Z]*$/);P(/^[a-zA-Z0-9]*$/);P(/^\d*(\.\d+)?$/);const et=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var tt=P(et),rt={$validator:tt,$message:"Value is not a valid email address",$params:{type:"email"}};function nt(e){return typeof e=="string"&&(e=e.trim()),fe(e)}var _={$validator:nt,$message:"Value is required",$params:{type:"required"}};const at=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;P(at);P(/(^[0-9]*$)|(^-[0-9]+$)/);P(/^[-]?\d*(\.\d+)?$/);const st=xe({name:"FeedbackComponent",components:{AppCard:Fe,AppInput:Ae,AppTextarea:_e},props:{fill:Boolean},setup(){const{t:e}=De(),n=ke(),r=S({name:"",phone:"",email:"",subject:"",message:""}),t=S({isLoading:!1,data:{},error:{}}),l=qe({name:{required:_},phone:{required:_},email:{required:_,email:rt},subject:{required:_},message:{required:_}},r);return{t:e,sendForm:async()=>{const i=await l.value.$validate();i?n.sendForm().then(o=>{Object.assign(t,o)}):console.log(i)},requestResult:t,formData:r,v$:l}}}),ot={class:"feedback"},lt={class:"form-title"},it={class:"form__fields"};function ut(e,n,r,t,s,l){const f=K("AppInput"),i=K("AppTextarea");return Te(),je("div",ot,[T("form",{class:Le(["feedback__form form",{form_fill:e.$props.fill}])},[T("span",lt,q(e.t("feedback.title")),1),T("div",it,[A(f,{error:e.v$.name.$error?e.t("field.name.error"):"",modelValue:e.formData.name,"onUpdate:modelValue":n[0]||(n[0]=o=>e.formData.name=o),whitePlaceholder:!0,coloredBorder:!0,placeholder:e.t("feedback.placeholder.name"),class:"form__fields-item"},null,8,["error","modelValue","placeholder"]),A(f,{mask:"+7 ### ### ## ##",modelValue:e.formData.phone,"onUpdate:modelValue":n[1]||(n[1]=o=>e.formData.phone=o),whitePlaceholder:!0,coloredBorder:!0,placeholder:e.t("feedback.placeholder.phone"),class:"form__fields-item"},null,8,["modelValue","placeholder"]),A(f,{error:e.v$.email.$error?e.t("field.email.error"):"",modelValue:e.formData.email,"onUpdate:modelValue":n[2]||(n[2]=o=>e.formData.email=o),whitePlaceholder:!0,coloredBorder:!0,placeholder:e.t("feedback.placeholder.email"),class:"form__fields-item"},null,8,["error","modelValue","placeholder"]),A(f,{modelValue:e.formData.subject,"onUpdate:modelValue":n[3]||(n[3]=o=>e.formData.subject=o),whitePlaceholder:!0,coloredBorder:!0,placeholder:e.t("feedback.placeholder.subject"),class:"form__fields-item"},null,8,["modelValue","placeholder"]),A(i,{modelValue:e.formData.message,"onUpdate:modelValue":n[4]||(n[4]=o=>e.formData.message=o),whitePlaceholder:!0,coloredBorder:!0,placeholder:e.t("feedback.placeholder.message"),class:"form__fields-item"},null,8,["modelValue","placeholder"])]),T("button",{onClick:n[5]||(n[5]=Ie((...o)=>e.sendForm&&e.sendForm(...o),["prevent"])),class:"form__submit",type:"submit"},q(e.t("feedback.send")),1)],2)])}const ft=Se(st,[["render",ut],["__scopeId","data-v-4917bcd1"]]);export{ft as F};
